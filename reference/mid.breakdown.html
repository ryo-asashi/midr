<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate MID Breakdown for a Prediction — mid.breakdown • midr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate MID Breakdown for a Prediction — mid.breakdown"><meta name="description" content="mid.breakdown() calculates the contribution of each component function of a fitted MID model to a single prediction.
It breaks down the total prediction into the effects of the intercept, main effects, and interactions."><meta property="og:description" content="mid.breakdown() calculates the contribution of each component function of a fitted MID model to a single prediction.
It breaks down the total prediction into the effects of the intercept, main effects, and interactions."><meta property="og:image" content="https://ryo-asashi.github.io/midr/logo.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">midr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0.909</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/index.html">Package Articles</a></li>
    <li><a class="dropdown-item" href="../articles/regression.html">- Interpretation of Regression Models</a></li>
    <li><a class="dropdown-item" href="../articles/classification.html">- Interpretation of Classification Models</a></li>
    <li><a class="dropdown-item" href="../articles/graphics.html">- Visualization with graphics package</a></li>
    <li><a class="dropdown-item" href="../articles/ggplot2.html">- Visualization with ggplot2 package</a></li>
    <li><a class="dropdown-item" href="../articles/colortheme.html">- Getting Started with Color Themes</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Publications</h6></li>
    <li><a class="external-link dropdown-item" href="https://arxiv.org/abs/2506.08338">- Working Paper (arXiv)</a></li>
    <li><a class="dropdown-item" href="../midr_jarip.pdf">- JARIP Bulletin (Japanese, PDF)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ryo-asashi/midr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculate MID Breakdown for a Prediction</h1>
      <small class="dont-index">Source: <a href="https://github.com/ryo-asashi/midr/blob/main/R/mid_breakdown.R" class="external-link"><code>R/mid_breakdown.R</code></a></small>
      <div class="d-none name"><code>mid.breakdown.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>mid.breakdown()</code> calculates the contribution of each component function of a fitted MID model to a single prediction.
It breaks down the total prediction into the effects of the intercept, main effects, and interactions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mid.breakdown</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  row <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sort <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"%s"</span>, <span class="st">"%s, %s"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>a "mid" object.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>a data frame containing one or more observations for which to calculate the MID breakdown. If <code>NULL</code>, data is automatically extracted from the parent frame.</p></dd>


<dt id="arg-row">row<a class="anchor" aria-label="anchor" href="#arg-row"></a></dt>
<dd><p>an optional numeric value or character string specifying the row of <code>data</code> to be used for the breakdown. If <code>NULL</code>, and the <code>data</code> contains two or more observations, only the first observation is used.</p></dd>


<dt id="arg-sort">sort<a class="anchor" aria-label="anchor" href="#arg-sort"></a></dt>
<dd><p>logical. If <code>TRUE</code>, the output data frame is sorted by the absolute contribution of each effect.</p></dd>


<dt id="arg-format">format<a class="anchor" aria-label="anchor" href="#arg-format"></a></dt>
<dd><p>a character vector of length two to be used as a format string for <code><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf()</a></code> to display the values of main effects and interactions, respectively.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>mid.breakdown()</code> returns an object of class "mid.breakdown". This is a list with the following components:</p>
<dl><dt>breakdown</dt>
<dd><p>a data frame containing the breakdown of the prediction.</p></dd>

<dt>data</dt>
<dd><p>the data frame containing the predictor variable values used for the prediction.</p></dd>

<dt>intercept</dt>
<dd><p>the intercept of the MID model.</p></dd>

<dt>prediction</dt>
<dd><p>the predicted value from the MID model.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>mid.breakdown()</code> is a method for local interpretability.
For a given observation, it provides a clear answer to the question, "How much did each component of the MID model contribute to the final prediction?"</p>
<p>The function calculates the value of each term in the MID model's additive structure for the specified observation.
The total prediction is the sum of these individual contributions.
The prediction, denoted \(\mathcal{F}(\mathbf{x})\), is decomposed as:
$$\mathcal{F}(\mathbf{x}) = f_\phi + \sum_{j} f_{j}(x_j) + \sum_{j&lt;k} f_{jk}(x_j, x_k)$$</p>
<p>The output data frame itemizes the numerical value of each main effect
(\(f_{j}(x_j)\)) and interaction effect (\(f_{jk}(x_j, x_k)\)),
along with the intercept (\(f_\phi\)). This makes the prediction transparent
and easy to understand.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Calculate the breakdown for the first and third observation in the data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">airquality</span>, package <span class="op">=</span> <span class="st">"datasets"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mid</span> <span class="op">&lt;-</span> <span class="fu"><a href="interpret.html">interpret</a></span><span class="op">(</span><span class="va">Ozone</span> <span class="op">~</span> <span class="va">.</span><span class="op">^</span><span class="fl">2</span>, data <span class="op">=</span> <span class="va">airquality</span>, lambda <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'model' not passed: response variable in 'data' is used</span>
<span class="r-in"><span><span class="va">mbd</span> <span class="op">&lt;-</span> <span class="fu">mid.breakdown</span><span class="op">(</span><span class="va">mid</span>, data <span class="op">=</span> <span class="va">airquality</span>, row <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mbd</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MID Breakdown of a Prediction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Intercept: 42.099</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prediction: 39.739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Breakdown of Effects:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             term    value         mid order</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           Temp       67 -1.5043e+01     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            Day        1  4.9770e+00     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          Month        5  3.7575e+00     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     Wind:Month   7.4, 5  2.0404e+00     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       Temp:Day    67, 1  1.3885e+00     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Solar.R:Month   190, 5  1.3124e+00     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           Wind      7.4  1.0227e+00     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        Solar.R      190 -9.4228e-01     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      Wind:Temp  7.4, 67 -6.2914e-01     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  Solar.R:Temp  190, 67 -5.6533e-01     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     Month:Day     5, 1  5.0500e-01     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   Solar.R:Day   190, 1 -2.4755e-01     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      Wind:Day   7.4, 1  4.2771e-02     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14    Temp:Month    67, 5  2.0660e-02     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  Solar.R:Wind 190, 7.4 -3.4803e-04     2</span>
<span class="r-in"><span><span class="va">mbd</span> <span class="op">&lt;-</span> <span class="fu">mid.breakdown</span><span class="op">(</span><span class="va">mid</span>, data <span class="op">=</span> <span class="va">airquality</span>, row <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mbd</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MID Breakdown of a Prediction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Intercept: 42.099</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prediction: 9.9693</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Breakdown of Effects:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             term     value        mid order</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           Temp        74 -16.686548     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            Day         3 -11.078821     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           Wind      12.6  -9.263680     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          Month         5   3.757459     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Solar.R:Month    149, 5   0.702906     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       Wind:Day   12.6, 3   0.501892     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     Wind:Month   12.6, 5  -0.461498     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   Solar.R:Wind 149, 12.6   0.321963     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      Month:Day      5, 3   0.180867     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      Temp:Day     74, 3   0.120489     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   Solar.R:Day    149, 3  -0.069100     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    Temp:Month     74, 5  -0.068488     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13       Solar.R       149  -0.034390     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     Wind:Temp  12.6, 74  -0.030288     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  Solar.R:Temp   149, 74  -0.022524     2</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ryoichi Asasihba, Hirokazu Iwasawa.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

